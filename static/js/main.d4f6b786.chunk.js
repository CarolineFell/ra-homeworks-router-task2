(this["webpackJsonpra-homeworks-router-task2"]=this["webpackJsonpra-homeworks-router-task2"]||[]).push([[0],{1104:function(e,t,a){},1105:function(e,t,a){},1111:function(e,t,a){},1112:function(e,t,a){},1113:function(e,t,a){},1114:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(29),s=a.n(r),o=(a(38),a(7)),l=a(8),i=a(9),m=a(10),u=a(4),d=a(1);a(39);function p(e){var t=e.header;return c.a.createElement("h1",{className:"header"},t)}p.defaultProps={header:"Welcome to CRUD post publisher"};var h=a(6),E=a.n(h),f=a(14),v=a.n(f),b=a(30),g=a.n(b),N=(a(1104),function(e){var t=e.content,a=e.created,n=e.children;function r(e,t){var a=e-.5+Math.random()*(t-e+1);return Math.round(a)}return c.a.createElement("div",{className:"ui centered card"},c.a.createElement("div",{className:"ui small circular image"},c.a.createElement("img",{src:v.a.image.avatar(),alt:"avatar"})),c.a.createElement("div",{className:"content"},c.a.createElement("a",{href:"/#",className:"user-name"},c.a.createElement("h3",null,v.a.name.firstName())),c.a.createElement("div",{className:"metadata"},c.a.createElement("span",{className:"post-date"},g()(a).format("DD.MM.YY HH:mm:ss"))),c.a.createElement("div",{className:"text"},t),c.a.createElement("div",{className:"likes-dislikes-favourite"},c.a.createElement("div",{className:"like"},c.a.createElement("i",{className:"thumbs up outline grey icon"}),c.a.createElement("span",{className:"number"},r(1,500))),c.a.createElement("div",{className:"dislike"},c.a.createElement("i",{className:"thumbs down outline grey icon"}),c.a.createElement("span",{className:"number"},r(1,500))),c.a.createElement("i",{className:"heart outline grey icon"})),c.a.createElement("div",{className:"edit"},n)))}),k=a(31),y=a.n(k),j=(a(1105),function(){return c.a.createElement("div",{className:"loader-bar"},c.a.createElement("img",{src:y.a,className:"loader",alt:"loading..."}))}),O=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={posts:[],loading:!0},e.setData=function(t){e.setState({posts:t,loading:!1})},e.getPosts=function(){E.a.get("".concat("https://ra-homeworks-router-server2.herokuapp.com","/posts")).then((function(t){return e.setData(t.data)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var e=this.state,t=e.posts;return e.loading?c.a.createElement(j,null):c.a.createElement("div",{className:"ui comments"},t.map((function(e){return c.a.createElement(N,Object.assign({key:e.id},e),c.a.createElement(u.b,{to:"/posts/".concat(e.id),className:"edit-post"},c.a.createElement("i",{className:"ellipsis vertical grey icon"})))})))}}]),a}(c.a.Component),w=a(12),C=(a(1111),function(e){var t=e.content,a=e.onSubmit,r=e.children,s=Object(n.useState)(""),o=Object(w.a)(s,2),l=o[0],i=o[1],m=Object(n.useState)(!1),u=Object(w.a)(m,2),d=u[0],p=u[1];Object(n.useEffect)((function(){t&&i(t)}),[t]);return d?c.a.createElement(j,null):c.a.createElement("form",{className:"ui form"},c.a.createElement("div",{className:"field"},c.a.createElement("textarea",{onChange:function(e){var t=e.target.value;i(t)},value:l})),c.a.createElement("div",{className:"buttons"},c.a.createElement("div",{className:"ui submit button publish",onClick:function(e){return t=e,p(!0),t.preventDefault(),void a(l);var t}},"Publish"),c.a.createElement("div",{className:"ui button clear",onClick:function(e){i("")}},"Clear"),r))}),S=function(){var e=Object(n.useState)(!1),t=Object(w.a)(e,2),a=t[0],r=t[1];return a?c.a.createElement(d.a,{to:"/"}):c.a.createElement(C,{onSubmit:function(e){E.a.post("".concat("https://ra-homeworks-router-server2.herokuapp.com","/posts"),{id:0,content:e}).then((function(){return r(!0)})).catch((function(e){console.log(e.message)}))}})},D=function(){return c.a.createElement("div",{className:"ui icon message"},c.a.createElement("div",{className:"content content-error"},c.a.createElement("div",{className:"header header-error"},"Error 404"),c.a.createElement("p",null,"This page does not exist"),c.a.createElement(u.b,{to:"/",className:"back"},c.a.createElement("i",{className:"arrow alternate circle left outline grey icon"})," Go back to main page")))},x=(a(1112),function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={post:null,deleted:!1,edited:!1,loading:!0},e.toggleEditing=function(){e.setState((function(e){return{edited:!e.edited}}))},e.handleDelete=function(){e.setState({loading:!0});var t=e.props.match.params;E.a.delete("".concat("https://ra-homeworks-router-server2.herokuapp.com","/posts/").concat(t.id)).then((function(){return e.setState({deleted:!0})})).catch((function(e){console.log(e.message)}))},e.handleEdit=function(t){E.a.post("".concat("https://ra-homeworks-router-server2.herokuapp.com","/posts"),{id:e.state.post.id,content:t}).then((function(){return e.props.history.go(0)})).catch((function(e){console.log(e.message)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,a=Number(t.id);E.a.get("".concat("https://ra-homeworks-router-server2.herokuapp.com","/posts")).then((function(t){var n=t.data.find((function(e){return e.id===a}));e.setState({post:n,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.post,n=t.deleted,r=t.edited,s=t.loading;return n?c.a.createElement(d.a,{to:"/"}):r?c.a.createElement(C,{content:a.content,onSubmit:this.handleEdit},c.a.createElement("div",{className:"ui button",onClick:function(){return e.toggleEditing()}},"Cancel")):void 0===a?c.a.createElement(D,null):s?c.a.createElement(j,null):c.a.createElement("div",{className:"ui comments"},c.a.createElement(N,a,c.a.createElement(u.b,{to:"/",className:"back"},c.a.createElement("i",{className:"arrow alternate circle left outline grey icon"})),c.a.createElement("i",{className:"edit outline grey icon",onClick:this.toggleEditing}),c.a.createElement("i",{className:"delete grey icon",onClick:this.handleDelete})))}}]),a}(c.a.Component)),M=(a(1113),function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(p,null),c.a.createElement("div",{className:"ui text container segment"},c.a.createElement(u.a,null,c.a.createElement("div",{className:"ui basic segment"},c.a.createElement("div",{className:"ui center aligned segment"},c.a.createElement(u.b,{to:"/",className:"ui icon button"},c.a.createElement("i",{className:"home blue icon"})),c.a.createElement(u.b,{to:"/posts/new",className:"ui positive button"},"Create post"))),c.a.createElement("div",{className:"ui basic segment"},c.a.createElement(d.d,null,c.a.createElement(d.b,{path:"/posts/new",component:S}),c.a.createElement(d.b,{path:"/posts/:id",component:x}),c.a.createElement(d.b,{path:"/",exact:!0,component:O}))))))}}]),a}(c.a.Component));s.a.render(c.a.createElement(M,null),document.getElementById("root"))},31:function(e,t,a){e.exports=a.p+"static/media/loader.fabe1c14.gif"},33:function(e,t,a){e.exports=a(1114)},38:function(e,t,a){},39:function(e,t,a){}},[[33,1,2]]]);
//# sourceMappingURL=main.d4f6b786.chunk.js.map